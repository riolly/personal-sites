---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import BlogLayout from "layouts/BlogLayout.astro";

import type { InferGetStaticPropsType } from "astro";
type Props = InferGetStaticPropsType<typeof getStaticPaths>;

export async function getStaticPaths() {
  const blogEntries = await getCollection("blog");
  return blogEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const {
  entry: { data, render },
} = Astro.props;
const { Content } = await render();
---

<BlogLayout frontmatter={data}>
  <Image
    src={data.image.banner}
    alt={data.image.alt}
    loading="eager"
    class="mb-[45vw] origin-top scale-[2] shadow-bottom shadow-slate-950 sm:mb-8 sm:scale-100"
  />

  <h1 class="px-4 text-center md:px-8 lg:px-16">{data.title}</h1>
  <div class="mx-auto max-w-screen-md px-6 md:px-16 lg:px-0">
    <Content />
  </div>
</BlogLayout>
